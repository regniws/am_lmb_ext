# Расширение адаптации загрузки ломбардов и скупки для Аскорт:Маркировка

## Соглашение

В данном репозитории приложен каркасная конфигурация достаточная только для чтения исходного источникак в ломбарде или скупке. Разработка строится вокруг обработки ЗагрузкаИзПрограммыЛомбарда и соответствующего написанного вами самостоятельно общего модуля по загрузке таблиц формы этой обработки. 

Допускается разработка только клиентского кода в клиентском общем модуле, дополнительных изменений в каркас не допускается за исключением случаев описанных ниже в разделе "Порядок разработки".

Вам необходимо добавить свой тип программы и описать порядок его загрузки в этом общем модуле, вносить изменения в реквизиты формы нужно только для целей настройки подключения до источника, удалять или изменять приведённый каркас не желательно для целей упрощения аудита. 

По всем вопросам просьба обращаться в телеграм напрямую в @company_1c (Мягков Антон). 

# Порядок развёртывания

* В новому пустом каталоге набрать

```git clone https://github.com/regniws/am_lmb_ext/```

* В данный каталог будут скопированны файлы данного репозитория
* Создать пустую базу в 1С:Предприятии версии не ниже 8.3.19 
* Развернуть в пустой базе template.dt 
* В данном шаблоне будут базовые метаданные и готовое пустое расширение
* В списке расширений нажать "загрузить конфигурацию из файлов" и выбрать каталог extension данного репозитория
* Подписаться на данный репозиторий
* Следить за новостями https://t.me/Ascort_Markirovka_news об обновлении шаблона и обновлять расширение из шаблона при выходе новых версий
* Для примера работы в шаблоне приводится загрузка формата ТЛС

# Порядок разработки

* Открыть обработку ЗагрузкаИзПрограммыЛомбарда
* В форме обработки в реквизите формы "Программа" добавить в список выбора название своей программы. Значение и представление могут не совпадать
* В группе ГруппаНастройкиАдаптация создать страниц с названием, равным добавленному значению в список выбора "Программа"
* Добавить реквизиты формы, отвечающие за настройку подключения до базы источника
* Разместить программные доработки формы только в области модуля РасширяемыеФункцииИПроцедуры 
* Добавить общий модуь с навзанием ЗФ_[НазваниеПрограммы]КлиентСервер
* В модуле ЗФ_ОбщегоНазначениКлиентСервер в процедуре МодульПоПрограмме описать получение соответствующего модуля
* В вашем модуле реализовать заполнение объекта данных обработки в части табличных частей (см пример ПрочитатьКлиентов, ПрочитатьЗалоги,  ПрочитатьВещи)
 ```
Параметры.Клиенты
Параметры.Залоги
Параметры.Вещи
```
* Для чтения и обработки допускается наличие только клиентского кода , вся обработка и чтение данных будет происходить на клиенте и передаваться в данные обработки. 
* Успешным результатом работы обработки является полностью заполненные выше указанные табличные части, методов обработки или загрузки этих табличных частей писать не нужно, только их заполнение, далее типовой код расширения корректно обработает и загрузит их 
